# Flask Configuration
SECRET_KEY=your-secret-key-change-this-in-production

# ============================================================================
# DEVELOPMENT MODE CONFIGURATION
# ============================================================================
# Toggle payment verification for development/testing
# Set to 'false' to disable all payment checks (dev/staging only)
# Set to 'true' for production (enforces payment verification)
PAYMENTS_ENABLED=true

# OpenAI API Configuration
OPENAI_API_KEY=your-openai-api-key-here

# Image APIs - Free stock photo services
# Pexels: https://www.pexels.com/api (Primary source)
PEXELS_API_KEY=your-pexels-api-key-here

# Unsplash: https://unsplash.com/developers (Fallback source, optional)
UNSPLASH_ACCESS_KEY=your-unsplash-access-key-here

# Firebase Authentication (Replaces Google OAuth)
# Path to Firebase service account key JSON file
FIREBASE_SERVICE_ACCOUNT_KEY=serviceAccountKey.json

# ============================================================================
# STRIPE PAYMENT CONFIGURATION
# ============================================================================
# Get these from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ============================================================================
# CLIP SEMANTIC IMAGE MATCHING
# ============================================================================
# Enable/disable CLIP AI-powered image selection
# When enabled, uses semantic understanding to match images to slide content
# When disabled, falls back to keyword-based search only
CLIP_ENABLED=true

# CLIP similarity threshold (0.0 - 1.0)
# Higher = more strict matching (fewer but more relevant images)
# Lower = more permissive (more images accepted)
# Recommended: 0.25-0.35 for balanced results
CLIP_SIMILARITY_THRESHOLD=0.30

# Minimum number of image candidates for CLIP to process
# If fewer candidates found, skips CLIP and uses keyword search
# Recommended: 8-10
CLIP_MIN_CANDIDATES=8

# Maximum number of candidates to fetch for CLIP ranking
# More candidates = better selection but slower processing
# Recommended: 15-20
CLIP_MAX_CANDIDATES=20

# ============================================================================
# TRANSLATION CONFIGURATION (Universal Layer)
# ============================================================================
# Universal translation layer for image search queries
# Supports multiple providers: none, libre, external

# Enable/disable translation for image searches
# When disabled, uses original text for all image queries (recommended with CLIP)
# When enabled, translates queries to TRANSLATION_TARGET_LANG
TRANSLATION_ENABLED=false

# Translation provider selection
# - 'none': No translation (uses original text)
# - 'libre': LibreTranslate service (localhost or self-hosted)
# - 'external': External API (Google Translate, DeepL, etc.)
# Default: 'none' (safe for production)
TRANSLATION_PROVIDER=none

# Target language for image searches
# Usually 'en' for better stock photo results from Pexels/Unsplash
# Can be changed to other languages if needed
TRANSLATION_TARGET_LANG=en

# LibreTranslate configuration (only used if TRANSLATION_PROVIDER='libre')
# Requires LibreTranslate service running locally or remotely
# Download: https://github.com/LibreTranslate/LibreTranslate
LIBRETRANSLATE_URL=http://localhost:5001
LIBRETRANSLATE_TIMEOUT=10

# External translation service (only used if TRANSLATION_PROVIDER='external')
# Configure for Google Translate API, DeepL, or similar services
# Leave empty if not using external translation
EXTERNAL_TRANSLATE_URL=
EXTERNAL_TRANSLATE_API_KEY=
EXTERNAL_TRANSLATE_TIMEOUT=5.0

# ============================================================================
# IMAGE SEARCH MODE CONFIGURATION
# ============================================================================
# Control image search behavior: LEGACY (stable) vs ADVANCED (experimental)

# USE_IMAGE_PROMPT: Whether to use LLM-generated image_prompt field
# - false (RECOMMENDED DEFAULT): LEGACY mode - uses search_keyword/title/content
#   • Ignores image_prompt field completely
#   • Uses search_keyword (LLM-generated in English)
#   • Maximum stability across RU/EN languages
#   • Proven, production-ready behavior
# - true: ADVANCED mode - uses image_prompt for better search queries
#   • Requires well-crafted image_prompt from LLM
#   • May improve image quality but less tested
#   • Recommended only after thorough testing
USE_IMAGE_PROMPT=false

# USE_STRICT_CLIP_FILTER: Whether CLIP should block images below threshold
# - false (RECOMMENDED DEFAULT): SOFT mode - CLIP only ranks, always picks best
#   • CLIP ranks candidates but never blocks images
#   • Always returns an image (no empty slides)
#   • Threshold used for ranking only
#   • Maximum stability, minimal failures
# - true: STRICT mode - CLIP can reject images below CLIP_SIMILARITY_THRESHOLD
#   • Images below threshold are rejected
#   • May result in slides without images
#   • Better quality but more failures
#   • Recommended only for curated content
USE_STRICT_CLIP_FILTER=false

# =============================================================================
# RECOMMENDED CONFIGURATIONS
# =============================================================================
# 
# PRODUCTION (Stable, Reliable):
#   USE_IMAGE_PROMPT=false
#   USE_STRICT_CLIP_FILTER=false
#   TRANSLATION_ENABLED=false
#   TRANSLATION_PROVIDER=none
#   Result: Maximum stability, works reliably for RU/EN presentations
#
# EXPERIMENTAL (Higher Quality, More Risk):
#   USE_IMAGE_PROMPT=true
#   USE_STRICT_CLIP_FILTER=true
#   TRANSLATION_ENABLED=true
#   TRANSLATION_PROVIDER=libre
#   Result: Better image quality but may fail more often
#
# HYBRID (Balanced):
#   USE_IMAGE_PROMPT=true
#   USE_STRICT_CLIP_FILTER=false  # Soft CLIP + image_prompt
#   TRANSLATION_ENABLED=false
#   Result: Better queries with image_prompt, but no strict filtering
# =============================================================================

# Admin Configuration
ADMIN_PASSWORD=admin123
